{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file:///Users/thegreataxios/skale-fair/sfuelstation.com/app/config.ts"],"sourcesContent":["import { type Chain } from \"viem\";\n\nexport type ChainConfig = {\n\tchain: Chain;\n\tname: string;\n\tdescription: string;\n\tlogoUrl: string;\n\tcolor: string;\n\tbackground: string;\n\tgradientBackground: string;\n\tproofOfWork: string;\n\tthreshold: number;\n\tnetwork: \"mainnet\" | \"testnet\";\n\tchainKey: string;\n\tfunctionSignature: string; // Europa mainnet uses 0x6a627842, others use 0x0c11dedd\n};\n\n// Calypso Mainnet\nconst calypsoMainnet: Chain = {\n\tid: 1564830818,\n\tname: \"Calypso Innovation Hub\",\n\tnativeCurrency: {\n\t\tname: \"sFUEL\",\n\t\tsymbol: \"sFUEL\",\n\t\tdecimals: 18\n\t},\n\trpcUrls: {\n\t\tdefault: {\n\t\t\thttp: [\"https://mainnet.skalenodes.com/v1/honorable-steel-rasalhague\"]\n\t\t}\n\t},\n\tblockExplorers: {\n\t\tdefault: {\n\t\t\tname: \"Calypso Explorer\",\n\t\t\turl: \"https://honorable-steel-rasalhague.explorer.mainnet.skalenodes.com\"\n\t\t}\n\t}\n};\n\n// Calypso Testnet\nconst calypsoTestnet: Chain = {\n\tid: 974399131,\n\tname: \"Calypso Testnet\",\n\tnativeCurrency: {\n\t\tname: \"sFUEL\",\n\t\tsymbol: \"sFUEL\",\n\t\tdecimals: 18\n\t},\n\trpcUrls: {\n\t\tdefault: {\n\t\t\thttp: [\"https://testnet.skalenodes.com/v1/giant-half-dual-testnet\"]\n\t\t}\n\t},\n\tblockExplorers: {\n\t\tdefault: {\n\t\t\tname: \"Calypso Testnet Explorer\",\n\t\t\turl: \"https://giant-half-dual-testnet.explorer.testnet.skalenodes.com\"\n\t\t}\n\t}\n};\n\n// Europa Mainnet\nconst europaMainnet: Chain = {\n\tid: 2046399126,\n\tname: \"Europa DeFi & Liquidity Hub\",\n\tnativeCurrency: {\n\t\tname: \"sFUEL\",\n\t\tsymbol: \"sFUEL\",\n\t\tdecimals: 18\n\t},\n\trpcUrls: {\n\t\tdefault: {\n\t\t\thttp: [\"https://mainnet.skalenodes.com/v1/elated-tan-skat\"]\n\t\t}\n\t},\n\tblockExplorers: {\n\t\tdefault: {\n\t\t\tname: \"Europa Explorer\",\n\t\t\turl: \"https://elated-tan-skat.explorer.mainnet.skalenodes.com\"\n\t\t}\n\t}\n};\n\n// Europa Testnet\nconst europaTestnet: Chain = {\n\tid: 1444673419,\n\tname: \"Europa Testnet\",\n\tnativeCurrency: {\n\t\tname: \"sFUEL\",\n\t\tsymbol: \"sFUEL\",\n\t\tdecimals: 18\n\t},\n\trpcUrls: {\n\t\tdefault: {\n\t\t\thttp: [\"https://testnet.skalenodes.com/v1/juicy-low-small-testnet\"]\n\t\t}\n\t},\n\tblockExplorers: {\n\t\tdefault: {\n\t\t\tname: \"Europa Testnet Explorer\",\n\t\t\turl: \"https://juicy-low-small-testnet.explorer.testnet.skalenodes.com\"\n\t\t}\n\t}\n};\n\n// Nebula Mainnet\nconst nebulaMainnet: Chain = {\n\tid: 1482601649,\n\tname: \"Nebula Gaming Hub\",\n\tnativeCurrency: {\n\t\tname: \"sFUEL\",\n\t\tsymbol: \"sFUEL\",\n\t\tdecimals: 18\n\t},\n\trpcUrls: {\n\t\tdefault: {\n\t\t\thttp: [\"https://mainnet.skalenodes.com/v1/green-giddy-denebola\"]\n\t\t}\n\t},\n\tblockExplorers: {\n\t\tdefault: {\n\t\t\tname: \"Nebula Explorer\",\n\t\t\turl: \"https://green-giddy-denebola.explorer.mainnet.skalenodes.com\"\n\t\t}\n\t}\n};\n\n// Nebula Testnet\nconst nebulaTestnet: Chain = {\n\tid: 37084624,\n\tname: \"Nebula Testnet\",\n\tnativeCurrency: {\n\t\tname: \"sFUEL\",\n\t\tsymbol: \"sFUEL\",\n\t\tdecimals: 18\n\t},\n\trpcUrls: {\n\t\tdefault: {\n\t\t\thttp: [\"https://testnet.skalenodes.com/v1/lanky-ill-funny-testnet\"]\n\t\t}\n\t},\n\tblockExplorers: {\n\t\tdefault: {\n\t\t\tname: \"Nebula Testnet Explorer\",\n\t\t\turl: \"https://lanky-ill-funny-testnet.explorer.testnet.skalenodes.com\"\n\t\t}\n\t}\n};\n\n// Titan Mainnet\nconst titanMainnet: Chain = {\n\tid: 1350216234,\n\tname: \"Titan AI Hub\",\n\tnativeCurrency: {\n\t\tname: \"sFUEL\",\n\t\tsymbol: \"sFUEL\",\n\t\tdecimals: 18\n\t},\n\trpcUrls: {\n\t\tdefault: {\n\t\t\thttp: [\"https://mainnet.skalenodes.com/v1/parallel-stormy-spica\"]\n\t\t}\n\t},\n\tblockExplorers: {\n\t\tdefault: {\n\t\t\tname: \"Titan Explorer\",\n\t\t\turl: \"https://parallel-stormy-spica.explorer.mainnet.skalenodes.com\"\n\t\t}\n\t}\n};\n\n// Titan Testnet\nconst titanTestnet: Chain = {\n\tid: 1020352220,\n\tname: \"Titan Testnet\",\n\tnativeCurrency: {\n\t\tname: \"sFUEL\",\n\t\tsymbol: \"sFUEL\",\n\t\tdecimals: 18\n\t},\n\trpcUrls: {\n\t\tdefault: {\n\t\t\thttp: [\"https://testnet.skalenodes.com/v1/aware-fake-trim-testnet\"]\n\t\t}\n\t},\n\tblockExplorers: {\n\t\tdefault: {\n\t\t\tname: \"Titan Testnet Explorer\",\n\t\t\turl: \"https://aware-fake-trim-testnet.explorer.testnet.skalenodes.com\"\n\t\t}\n\t}\n};\n\nexport const allChains: ChainConfig[] = [\n\t// Calypso Mainnet\n\t{\n\t\tchain: calypsoMainnet,\n\t\tname: \"Calypso Innovation Hub\",\n\t\tdescription: \"An Innovation Hub focused on projects looking to use blockchain in new and unique ways\",\n\t\tlogoUrl: \"https://raw.githubusercontent.com/skalenetwork/skale-network/master/metadata/mainnet/logos/honorable-steel-rasalhague.png\",\n\t\tcolor: \"#FFF\",\n\t\tbackground: \"#ce126f\",\n\t\tgradientBackground: \"linear-gradient(270deg, rgb(103 35 71), rgb(57 15 68))\",\n\t\tproofOfWork: \"0x02891b34B7911A9C68e82C193cd7A6fBf0c3b30A\",\n\t\tthreshold: 0.005,\n\t\tnetwork: \"mainnet\",\n\t\tchainKey: \"calypso-mainnet\",\n\t\tfunctionSignature: \"0x0c11dedd\"\n\t},\n\t// Calypso Testnet\n\t{\n\t\tchain: calypsoTestnet,\n\t\tname: \"Calypso Testnet\",\n\t\tdescription: \"An Innovation Hub focused on projects looking to use blockchain in new and unique ways\",\n\t\tlogoUrl: \"https://raw.githubusercontent.com/skalenetwork/skale-network/master/metadata/mainnet/logos/honorable-steel-rasalhague.png\",\n\t\tcolor: \"#FFF\",\n\t\tbackground: \"#ce126f\",\n\t\tgradientBackground: \"linear-gradient(270deg, rgb(103 35 71), rgb(57 15 68))\",\n\t\tproofOfWork: \"0x62Fe932FF26e0087Ae383f6080bd2Ed481bA5A8A\",\n\t\tthreshold: 0.5,\n\t\tnetwork: \"testnet\",\n\t\tchainKey: \"calypso-testnet\",\n\t\tfunctionSignature: \"0x0c11dedd\"\n\t},\n\t// Europa Mainnet\n\t{\n\t\tchain: europaMainnet,\n\t\tname: \"Europa DeFi & Liquidity Hub\",\n\t\tdescription: \"The Liquidity Hub acts as both a utility to the SKALE Ecosystem and the home of DeFi on SKALE\",\n\t\tlogoUrl: \"https://raw.githubusercontent.com/skalenetwork/skale-network/master/metadata/mainnet/logos/elated-tan-skat.png\",\n\t\tcolor: \"#FFF\",\n\t\tbackground: \"rgb(5 19 37)\",\n\t\tgradientBackground: \"linear-gradient(270deg, rgb(5, 19, 37), rgb(13 36 65))\",\n\t\tproofOfWork: \"0x2B267A3e49b351DEdac892400a530ABb2f899d23\",\n\t\tthreshold: 0.1,\n\t\tnetwork: \"mainnet\",\n\t\tchainKey: \"europa-mainnet\",\n\t\tfunctionSignature: \"0x6a627842\" // Europa mainnet uses mint function\n\t},\n\t// Europa Testnet\n\t{\n\t\tchain: europaTestnet,\n\t\tname: \"Europa Testnet\",\n\t\tdescription: \"The Liquidity Hub acts as both a utility to the SKALE Ecosystem and the home of DeFi on SKALE\",\n\t\tlogoUrl: \"https://raw.githubusercontent.com/skalenetwork/skale-network/master/metadata/mainnet/logos/elated-tan-skat.png\",\n\t\tcolor: \"#FFF\",\n\t\tbackground: \"rgb(5 19 37)\",\n\t\tgradientBackground: \"linear-gradient(270deg, rgb(5, 19, 37), rgb(13 36 65))\",\n\t\tproofOfWork: \"0x366727B410fE55774C8b0B5b5A6E2d74199a088A\",\n\t\tthreshold: 0.5,\n\t\tnetwork: \"testnet\",\n\t\tchainKey: \"europa-testnet\",\n\t\tfunctionSignature: \"0x0c11dedd\"\n\t},\n\t// Nebula Mainnet\n\t{\n\t\tchain: nebulaMainnet,\n\t\tname: \"Nebula Gaming Hub\",\n\t\tdescription: \"A hub focused 100% on gaming, Nebula is the home of gaming on the SKALE Network\",\n\t\tlogoUrl: \"https://raw.githubusercontent.com/skalenetwork/skale-network/master/metadata/mainnet/logos/green-giddy-denebola.png\",\n\t\tcolor: \"#FFF\",\n\t\tbackground: \"#2c1626\",\n\t\tgradientBackground: \"linear-gradient(270deg, #2f1728, #1b0e17)\",\n\t\tproofOfWork: \"0x5a6869ef5b81DCb58EBF51b8F893c31f5AFE3Fa8\",\n\t\tthreshold: 0.0001,\n\t\tnetwork: \"mainnet\",\n\t\tchainKey: \"nebula-mainnet\",\n\t\tfunctionSignature: \"0x0c11dedd\"\n\t},\n\t// Nebula Testnet\n\t{\n\t\tchain: nebulaTestnet,\n\t\tname: \"Nebula Testnet\",\n\t\tdescription: \"A hub focused 100% on gaming, Nebula is the home of gaming on the SKALE Network\",\n\t\tlogoUrl: \"https://raw.githubusercontent.com/skalenetwork/skale-network/master/metadata/mainnet/logos/green-giddy-denebola.png\",\n\t\tcolor: \"#FFF\",\n\t\tbackground: \"#2c1626\",\n\t\tgradientBackground: \"linear-gradient(270deg, #2f1728, #1b0e17)\",\n\t\tproofOfWork: \"0x000E9c53C4e2e21F5063f2e232d0AA907318dccb\",\n\t\tthreshold: 0.5,\n\t\tnetwork: \"testnet\",\n\t\tchainKey: \"nebula-testnet\",\n\t\tfunctionSignature: \"0x0c11dedd\"\n\t},\n\t// Titan Mainnet\n\t{\n\t\tchain: titanMainnet,\n\t\tname: \"Titan AI Hub\",\n\t\tdescription: \"The AI Hub on SKALE is a great starting place to explore the crossover between AI and blockchain\",\n\t\tlogoUrl: \"https://portal.skale.space/assets/parallel-stormy-spica-068cfa33.png\",\n\t\tcolor: \"#FFF\",\n\t\tbackground: \"#FFF\",\n\t\tgradientBackground: \"linear-gradient(270deg, rgb(72, 33, 17), rgb(34, 13, 5))\",\n\t\tproofOfWork: \"0xa5C297dF8f8386E4b940D61EF9A8f2bB367a6fAB\",\n\t\tthreshold: 0.005,\n\t\tnetwork: \"mainnet\",\n\t\tchainKey: \"titan-mainnet\",\n\t\tfunctionSignature: \"0x0c11dedd\"\n\t},\n\t// Titan Testnet\n\t{\n\t\tchain: titanTestnet,\n\t\tname: \"Titan Testnet\",\n\t\tdescription: \"The AI Hub on SKALE is a great starting place to explore the crossover between AI and blockchain\",\n\t\tlogoUrl: \"https://portal.skale.space/assets/parallel-stormy-spica-068cfa33.png\",\n\t\tcolor: \"#FFF\",\n\t\tbackground: \"#FFF\",\n\t\tgradientBackground: \"linear-gradient(270deg, rgb(72, 33, 17), rgb(34, 13, 5))\",\n\t\tproofOfWork: \"0x08f98Af60eb83C18184231591A8F89577E46A4B9\",\n\t\tthreshold: 0.5,\n\t\tnetwork: \"testnet\",\n\t\tchainKey: \"titan-testnet\",\n\t\tfunctionSignature: \"0x0c11dedd\"\n\t}\n];\n\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 375, "column": 0}, "map": {"version":3,"sources":["file:///Users/thegreataxios/skale-fair/sfuelstation.com/app/utils/signers.ts"],"sourcesContent":["import { mnemonicToAccount } from \"viem/accounts\";\nimport { createWalletClient, http, type Chain } from \"viem\";\n\n/**\n * Signer utility for managing multiple signers from a single mnemonic\n * Supports multichain by creating wallet clients for different chains\n */\nexport class MultiSignerManager {\n\tprivate mnemonic: string;\n\tprivate maxSigners: number;\n\n\tconstructor(mnemonic: string, maxSigners: number) {\n\t\tthis.mnemonic = mnemonic;\n\t\tthis.maxSigners = maxSigners;\n\t}\n\n\t/**\n\t * Get a wallet client for a specific signer index and chain\n\t */\n\tgetSigner(signerIndex: number, chain: Chain) {\n\t\tif (signerIndex < 0 || signerIndex >= this.maxSigners) {\n\t\t\tthrow new Error(`Signer index out of range: ${signerIndex}`);\n\t\t}\n\n\t\tconst account = mnemonicToAccount(this.mnemonic, { addressIndex: signerIndex });\n\t\treturn createWalletClient({\n\t\t\taccount,\n\t\t\ttransport: http(),\n\t\t\tchain\n\t\t});\n\t}\n\n\t/**\n\t * Get all signers for a specific chain\n\t */\n\tgetAllSigners(chain: Chain) {\n\t\tconst signers = [];\n\t\tfor (let i = 0; i < this.maxSigners; i++) {\n\t\t\tsigners.push(this.getSigner(i, chain));\n\t\t}\n\t\treturn signers;\n\t}\n\n\t/**\n\t * Get the maximum number of signers\n\t */\n\tgetMaxSigners(): number {\n\t\treturn this.maxSigners;\n\t}\n}\n\n/**\n * Get the current signer index from Redis and increment for next use\n * Uses a global key that rotates across all signers\n */\nexport async function getNextSignerIndex(\n\tredis: any,\n\tkey: string = \"current_signer_index\"\n): Promise<number> {\n\tconst currentIndex = await redis.get(key);\n\tif (currentIndex === null || currentIndex === undefined) {\n\t\t// Initialize to 0 if not set\n\t\tawait redis.set(key, 0);\n\t\treturn 0;\n\t}\n\n\tconst nextIndex = (parseInt(currentIndex) + 1) % signerManager.getMaxSigners();\n\tawait redis.set(key, nextIndex);\n\treturn nextIndex;\n}\n\n/**\n * Get and increment nonce for a specific signer on a specific chain\n */\nexport async function getAndIncrementNonce(\n\tredis: any,\n\tsignerIndex: number,\n\tchainId: number\n): Promise<number> {\n\tconst nonceKey = `nonce:signer:${signerIndex}:chain:${chainId}`;\n\tconst currentNonce = await redis.get(nonceKey);\n\tconst nonce = currentNonce ? Number(currentNonce) : 0;\n\n\t// Increment nonce for next transaction\n\tawait redis.set(nonceKey, nonce + 1);\n\treturn nonce;\n}\n\n/**\n * Initialize the signer manager from environment\n */\nexport function initializeSignerManager(): MultiSignerManager {\n\tconst mnemonic = process.env.MNEMONIC;\n\tif (!mnemonic) {\n\t\tthrow new Error(\"MNEMONIC environment variable is required\");\n\t}\n\n\tconst maxSigners = parseInt(process.env.MAX_SIGNERS || \"10\");\n\treturn new MultiSignerManager(mnemonic, maxSigners);\n}\n\n// Global signer manager instance\nexport const signerManager = initializeSignerManager();\n\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AACA;AAAA;;;AAMO,MAAM;IACJ,SAAiB;IACjB,WAAmB;IAE3B,YAAY,QAAgB,EAAE,UAAkB,CAAE;QACjD,IAAI,CAAC,QAAQ,GAAG;QAChB,IAAI,CAAC,UAAU,GAAG;IACnB;IAEA;;EAEC,GACD,UAAU,WAAmB,EAAE,KAAY,EAAE;QAC5C,IAAI,cAAc,KAAK,eAAe,IAAI,CAAC,UAAU,EAAE;YACtD,MAAM,IAAI,MAAM,CAAC,2BAA2B,EAAE,aAAa;QAC5D;QAEA,MAAM,UAAU,IAAA,gQAAiB,EAAC,IAAI,CAAC,QAAQ,EAAE;YAAE,cAAc;QAAY;QAC7E,OAAO,IAAA,iQAAkB,EAAC;YACzB;YACA,WAAW,IAAA,mPAAI;YACf;QACD;IACD;IAEA;;EAEC,GACD,cAAc,KAAY,EAAE;QAC3B,MAAM,UAAU,EAAE;QAClB,IAAK,IAAI,IAAI,GAAG,IAAI,IAAI,CAAC,UAAU,EAAE,IAAK;YACzC,QAAQ,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG;QAChC;QACA,OAAO;IACR;IAEA;;EAEC,GACD,gBAAwB;QACvB,OAAO,IAAI,CAAC,UAAU;IACvB;AACD;AAMO,eAAe,mBACrB,KAAU,EACV,MAAc,sBAAsB;IAEpC,MAAM,eAAe,MAAM,MAAM,GAAG,CAAC;IACrC,IAAI,iBAAiB,QAAQ,iBAAiB,WAAW;QACxD,6BAA6B;QAC7B,MAAM,MAAM,GAAG,CAAC,KAAK;QACrB,OAAO;IACR;IAEA,MAAM,YAAY,CAAC,SAAS,gBAAgB,CAAC,IAAI,cAAc,aAAa;IAC5E,MAAM,MAAM,GAAG,CAAC,KAAK;IACrB,OAAO;AACR;AAKO,eAAe,qBACrB,KAAU,EACV,WAAmB,EACnB,OAAe;IAEf,MAAM,WAAW,CAAC,aAAa,EAAE,YAAY,OAAO,EAAE,SAAS;IAC/D,MAAM,eAAe,MAAM,MAAM,GAAG,CAAC;IACrC,MAAM,QAAQ,eAAe,OAAO,gBAAgB;IAEpD,uCAAuC;IACvC,MAAM,MAAM,GAAG,CAAC,UAAU,QAAQ;IAClC,OAAO;AACR;AAKO,SAAS;IACf,MAAM,WAAW,QAAQ,GAAG,CAAC,QAAQ;IACrC,IAAI,CAAC,UAAU;QACd,MAAM,IAAI,MAAM;IACjB;IAEA,MAAM,aAAa,SAAS,QAAQ,GAAG,CAAC,WAAW,IAAI;IACvD,OAAO,IAAI,mBAAmB,UAAU;AACzC;AAGO,MAAM,gBAAgB","debugId":null}},
    {"offset": {"line": 461, "column": 0}, "map": {"version":3,"sources":["file:///Users/thegreataxios/skale-fair/sfuelstation.com/app/api/claim/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport { createPublicClient, getAddress, http, isAddress, type Address } from \"viem\";\nimport { mainnet } from \"viem/chains\";\nimport { Redis } from \"@upstash/redis\";\nimport { allChains, type ChainConfig } from \"../../config\";\nimport { signerManager, getNextSignerIndex, getAndIncrementNonce } from \"../../utils/signers\";\n\nconst redis = Redis.fromEnv();\nconst ethPublicClient = createPublicClient({\n\ttransport: http(),\n\tchain: mainnet\n});\n\nconst GAS_LIMIT = 100_000n;\nconst GAS_PRICE = 10_000_000_000n; // 10 gwei\n\nexport async function POST(request: NextRequest) {\n\ttry {\n\t\tconst body = await request.json();\n\t\tconst { address } = body;\n\n\t\tif (!address) {\n\t\t\treturn NextResponse.json(\n\t\t\t\t{ error: \"Missing required parameter: address\" },\n\t\t\t\t{ status: 400 }\n\t\t\t);\n\t\t}\n\n\t\t// Resolve address (handle ENS)\n\t\tlet resolvedAddress: `0x${string}`;\n\t\tif (!isAddress(address)) {\n\t\t\tconst _resolvedAddress = await ethPublicClient.getEnsAddress({ name: address });\n\t\t\tif (!_resolvedAddress) {\n\t\t\t\treturn NextResponse.json(\n\t\t\t\t\t{ error: \"Invalid wallet address or ENS Name\" },\n\t\t\t\t\t{ status: 400 }\n\t\t\t\t);\n\t\t\t}\n\t\t\tresolvedAddress = getAddress(_resolvedAddress);\n\t\t} else {\n\t\t\tresolvedAddress = getAddress(address);\n\t\t}\n\n\t\t// Process all chains in parallel\n\t\tconst claimPromises = allChains.map(async (chainConfig) => {\n\t\t\ttry {\n\t\t\t\t// Get next signer index and wallet for this transaction\n\t\t\t\tconst signerIndex = await getNextSignerIndex(redis);\n\t\t\t\tconst wallet = signerManager.getSigner(signerIndex, chainConfig.chain);\n\n\t\t\t\t// Get and increment nonce for this signer on this chain\n\t\t\t\tconst nonce = await getAndIncrementNonce(redis, signerIndex, chainConfig.chain.id);\n\n\t\t\t\t// Create public client for this chain\n\t\t\t\tconst publicClient = createPublicClient({\n\t\t\t\t\ttransport: http(),\n\t\t\t\t\tchain: chainConfig.chain\n\t\t\t\t});\n\n\t\t\t\t// Prepare transaction data\n\t\t\t\t// Encode recipient address as last 20 bytes (remove 0x prefix)\n\t\t\t\tconst recipientAddress = resolvedAddress.substring(2).toLowerCase();\n\t\t\t\tconst data = `${chainConfig.functionSignature}000000000000000000000000${recipientAddress}` as `0x${string}`;\n\n\t\t\t\t// Send transaction\n\t\t\t\tconst hash = await wallet.sendTransaction({\n\t\t\t\t\tto: chainConfig.proofOfWork as Address,\n\t\t\t\t\tdata,\n\t\t\t\t\tgas: GAS_LIMIT,\n\t\t\t\t\tgasPrice: GAS_PRICE,\n\t\t\t\t\tnonce\n\t\t\t\t});\n\n\t\t\t\t// Wait for transaction receipt\n\t\t\t\tawait publicClient.waitForTransactionReceipt({ hash });\n\n\t\t\t\treturn {\n\t\t\t\t\tchainKey: chainConfig.chainKey,\n\t\t\t\t\tchainName: chainConfig.name,\n\t\t\t\t\tsuccess: true,\n\t\t\t\t\thash\n\t\t\t\t};\n\t\t\t} catch (error: any) {\n\t\t\t\tconsole.error(`Error claiming for ${chainConfig.chainKey}:`, error);\n\t\t\t\treturn {\n\t\t\t\t\tchainKey: chainConfig.chainKey,\n\t\t\t\t\tchainName: chainConfig.name,\n\t\t\t\t\tsuccess: false,\n\t\t\t\t\terror: error.message || String(error)\n\t\t\t\t};\n\t\t\t}\n\t\t});\n\n\t\tconst results = await Promise.allSettled(claimPromises);\n\t\tconst claimResults = results.map((result) =>\n\t\t\tresult.status === \"fulfilled\" ? result.value : { success: false, error: \"Promise rejected\" }\n\t\t);\n\n\t\tconst successful = claimResults.filter((r) => r.success).length;\n\t\tconst failed = claimResults.filter((r) => !r.success).length;\n\n\t\t// If all claims failed, return appropriate error status\n\t\tif (failed === allChains.length) {\n\t\t\t// Check if it's a user input error (unlikely at this point, but check anyway)\n\t\t\tconst firstError = claimResults.find((r) => !r.success)?.error || \"\";\n\t\t\tconst isUserInputError = firstError.toLowerCase().includes(\"invalid\") || \n\t\t\t                          firstError.toLowerCase().includes(\"missing\") ||\n\t\t\t                          firstError.toLowerCase().includes(\"required\");\n\t\t\t\n\t\t\tif (isUserInputError) {\n\t\t\t\treturn NextResponse.json(\n\t\t\t\t\t{ \n\t\t\t\t\t\terror: \"User input error\",\n\t\t\t\t\t\tdetails: claimResults.filter((r) => !r.success).map((r) => ({\n\t\t\t\t\t\t\tchain: r.chainName,\n\t\t\t\t\t\t\terror: r.error\n\t\t\t\t\t\t}))\n\t\t\t\t\t},\n\t\t\t\t\t{ status: 400 }\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Otherwise, it's a server/transaction error\n\t\t\treturn NextResponse.json(\n\t\t\t\t{ \n\t\t\t\t\terror: \"Failed to process transactions\",\n\t\t\t\t\tdetails: claimResults.filter((r) => !r.success).map((r) => ({\n\t\t\t\t\t\tchain: r.chainName,\n\t\t\t\t\t\terror: r.error\n\t\t\t\t\t}))\n\t\t\t\t},\n\t\t\t\t{ status: 500 }\n\t\t\t);\n\t\t}\n\n\t\t// Return results with 200 status (partial success is still success)\n\t\treturn NextResponse.json({\n\t\t\tsuccess: failed === 0,\n\t\t\tresults: claimResults,\n\t\t\tsummary: {\n\t\t\t\ttotal: allChains.length,\n\t\t\t\tsuccessful,\n\t\t\t\tfailed\n\t\t\t}\n\t\t});\n\t} catch (error: any) {\n\t\tconsole.error(\"Error in claim API:\", error);\n\t\t\n\t\t// Determine if it's a user input error or server error\n\t\tconst errorMessage = error.message || String(error);\n\t\tconst isUserInputError = errorMessage.toLowerCase().includes(\"invalid\") ||\n\t\t                        errorMessage.toLowerCase().includes(\"missing\") ||\n\t\t                        errorMessage.toLowerCase().includes(\"required\") ||\n\t\t                        errorMessage.toLowerCase().includes(\"bad request\");\n\t\t\n\t\tif (isUserInputError) {\n\t\t\treturn NextResponse.json(\n\t\t\t\t{ error: \"User input error\", details: errorMessage },\n\t\t\t\t{ status: 400 }\n\t\t\t);\n\t\t}\n\n\t\t// Default to 500 for server errors, transaction issues, out of gas, etc.\n\t\treturn NextResponse.json(\n\t\t\t{ error: \"Failed to process claim\", details: errorMessage },\n\t\t\t{ status: 500 }\n\t\t);\n\t}\n}\n\n"],"names":[],"mappings":"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","debugId":null}}]
}